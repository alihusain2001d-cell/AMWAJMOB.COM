<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>أمواج للإلكترونيات</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="icon" href="LOGO%20MOB.png">
<link rel="apple-touch-icon" href="LOGO%20MOB.png">
<meta name="theme-color" content="#1e88e5">

<style>
body{
  font-family:sans-serif;
  padding:18px;
  background:linear-gradient(135deg,#e6f6ff,#cfefff,#e6f6ff);
}
.container{
  max-width:580px;margin:auto;background:#fff;
  padding:18px;border-radius:16px;
  box-shadow:0 12px 28px rgba(0,0,0,.08)
}
.logo{text-align:center;margin-bottom:12px}
.logo img{width:140px}
.bigbtn{width:100%;padding:14px;border-radius:12px;border:0;margin:8px 0;font-size:20px;font-weight:bold}
.big1{background:#1e88e5;color:#fff}
.big2{background:#6c7d90;color:#fff}
input,select,button{width:100%;padding:6px;margin:6px 0 14px;border-radius:10px;border:1px solid #ccd6e6}
button{background:#1e88e5;color:#fff;border:none}
.result{background:#e8f4ff;padding:12px;border-radius:10px;display:none}
.msg-err{display:none;background:#fde7e7;color:#b10606;padding:10px;border-radius:10px}
.brands-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.brand{background:#f5f7fa;border-radius:12px;padding:18px;text-align:center;font-weight:bold;cursor:pointer}
</style>
</head>

<body>

<!-- تسجيل الدخول -->
<div id="loginBox" style="text-align:center;padding:30px">
  <h3>تسجيل الدخول</h3>
  <input id="loginName" placeholder="الاسم">
  <input id="loginPhone" placeholder="رقم الموبايل">
  <button onclick="register()">تسجيل</button>
  <p id="loginMsg" style="color:red"></p>
</div>

<!-- محتوى الموقع -->
<div id="appContent" style="display:none">

<div class="container">
<div class="logo"><img src="1633875906547.jpg"></div>

<div id="home">
  <button class="bigbtn big1" onclick="openAct()">تفعيل الضمان</button>
  <button class="bigbtn big2" onclick="openChk()">التحقق من الضمان</button>
  <button class="bigbtn big1" onclick="openPrices()">أسعار الشاشات</button>
</div>

</div>
</div>

<script>
/* ========= أدوات ========= */
function normalizeNumber(str){
  if(!str) return "";
  return str.replace(/[٠-٩]/g,d=>"٠١٢٣٤٥٦٧٨٩".indexOf(d));
}

/* ========= تسجيل الدخول ========= */
const API_URL="https://script.google.com/macros/s/AKfycbyYCFidhBCn8yIo4tdiO8j9JlOt73S6NAlEyg1feCw1dsANFDpba1aW5yhgRHPFBik_/exec";

function showLogin(){
  loginBox.style.display="block";
  appContent.style.display="none";
}
function openApp(){
  loginBox.style.display="none";
  appContent.style.display="block";
}

function register(){
  const name=loginName.value.trim();
  const phone=loginPhone.value.trim();
  if(!name||!phone){loginMsg.innerText="أدخل البيانات";return;}

  fetch(API_URL,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({name,phone})
  })
  .then(r=>r.json())
  .then(res=>{
    localStorage.setItem("user_phone",phone);
    if(res.status==="approved") openApp();
    else loginMsg.innerText="بانتظار الموافقة";
  });
}

document.addEventListener("DOMContentLoaded",()=>{
  const phone=localStorage.getItem("user_phone");
  if(phone){
    fetch(API_URL,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({phone})
    }).then(r=>r.json())
      .then(res=>res.status==="approved"?openApp():showLogin());
  }else showLogin();
});
</script>

</body>
</html>
