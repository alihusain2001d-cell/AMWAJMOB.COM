<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>ุงุณุชุนูุงู ุถูุงู ุฃููุงุฌ</title>
</head>

<body>

<h2>ุงุณุชุนูุงู ุถูุงู ุฃููุงุฌ ููุฅููุชุฑูููุงุช</h2>

<p>ูุฑุฌู ุฅุฏุฎุงู ุฑูู ุงููุงุชูุฑุฉ ููุจุญุซ ุนู ุงูุถูุงู.</p>

<label>๐งพ ุฑูู ุงููุงุชูุฑุฉ</label><br>
<input id="invoiceSearch" type="text" placeholder="ุงูุชุจ ุฑูู ุงููุงุชูุฑุฉ">
<br><br>

<button onclick="checkWarranty()">ุจุญุซ</button>

<hr>

<div id="result"></div>

<script>
function checkWarranty() {
  const invoice = document.getElementById("invoiceSearch").value;
  let warranties = JSON.parse(localStorage.getItem("warranties") || "[]");

  const found = warranties.find(w => w.invoice === invoice);

  if (!found) {
    document.getElementById("result").innerHTML =
      "<p style='color:red'>โ ูุง ููุฌุฏ ุถูุงู ููุฐุง ุงูุฑูู</p>";
    return;
  }

  // ูุญุต ุญุงูุฉ ุงูุถูุงู
  let today = new Date();
  let expiry = new Date(found.expiryDate);

  let status =
    today <= expiry
      ? "<span style='color:green'>โ๏ธ ุงูุถูุงู ุณุงุฑู</span>"
      : "<span style='color:red'>โ ุงูุถูุงู ููุชูู</span>";

  document.getElementById("result").innerHTML = `
    <p>๐ค ุงูุงุณู: ${found.name}</p>
    <p>๐ ุงููุงุชู: ${found.phone}</p>
    <p>๐งพ ุงููุงุชูุฑุฉ: ${found.invoice}</p>
    <p>๐ง ููุน ุงููุทุนุฉ: ${found.type === "screen" ? "ุดุงุดุฉ" : "ุจุทุงุฑูุฉ"}</p>
    <p>๐ ุชุงุฑูุฎ ุงูุดุฑุงุก: ${found.purchaseDate}</p>
    <p>๐ ุชุงุฑูุฎ ุงูุชูุงุก ุงูุถูุงู: ${found.expiryDate}</p>
    <h3>${status}</h3>
  `;
}
</script>

</body>
</html>
